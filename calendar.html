<!-- calendar.html (layout fix: scroll 12 months horizontally + top overview blurb) -->
<div class="owcal" id="owcal">
  <!-- TOP BAR: TODAY / SELECTED DAY -->
  <div class="owcal-topbar" role="region" aria-label="Selected day overview">
    <div class="owcal-top-left">
      <div class="owcal-top-title" id="owcalTopTitle">Today</div>
      <div class="owcal-top-line" id="owcalTopLine">Loading…</div>
      <div class="owcal-top-sub" id="owcalTopSub"></div>
      <div class="owcal-top-blurb" id="owcalTopBlurb"></div>
    </div>

    <div class="owcal-top-right">
      <button class="owcal-btn" id="jumpToday" type="button">Jump to Today</button>
      <button class="owcal-btn" id="jumpMonth" type="button">Jump to Month</button>
      <span class="owcal-small">Anchor: <code id="anchorTxt"></code> = Day 1</span>
    </div>
  </div>

  <!-- MONTH SCROLLER (12 “pages”) -->
  <div class="owcal-shell">
    <div class="owcal-calendar" id="calendar"></div>
  </div>
</div>

<style>
.owcal { font-family: inherit; color: inherit; }

.owcal .owcal-topbar{
  background-color: rgba(255,255,255,0.85);
  border: 4px groove #222;
  box-shadow: 4px 4px 8px #555;
  padding: 12px 14px;
  display:flex;
  justify-content: space-between;
  gap: 12px;
  align-items: center;
  margin-bottom: 14px;
  position: sticky;
  top: 0;
  z-index: 5;
}

.owcal .owcal-top-title{ font-weight: bold; margin-bottom: 4px; }
.owcal .owcal-top-line{ font-weight: bold; }
.owcal .owcal-top-sub{ margin-top: 4px; font-size: 0.92em; color: #333; }
.owcal .owcal-top-blurb{
  margin-top: 8px;
  padding: 8px 10px;
  background: #fffbe0;
  border: 2px outset #ccc;
  font-size: 0.92em;
  min-height: 18px; /* keeps layout stable even when empty */
}

.owcal .owcal-top-right{
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items:center;
  justify-content: flex-end;
  text-align: right;
}

.owcal .owcal-btn{
  text-decoration: none;
  color: #000;
  background-color: #ffe;
  padding: 4px 8px;
  border: 2px outset #ccc;
  font-weight: bold;
  font-family: inherit;   /* follow site stylesheet */
  cursor: pointer;
}
.owcal .owcal-btn:hover{
  color: #900;
  text-decoration: underline wavy #900;
  background-color: #fffbe0;
}

.owcal .owcal-small{ font-size: 0.88em; }
.owcal code{ font-family: inherit; }

.owcal .owcal-shell{
  background-color: rgba(255,255,255,0.85);
  border: 4px groove #222;
  box-shadow: 4px 4px 8px #555;
  padding: 14px;
}

/* Horizontal month scroller */
.owcal .owcal-calendar{
  display:flex;
  flex-wrap: nowrap;          /* critical: never stack */
  gap: 14px;
  overflow-x: auto;
  overflow-y: hidden;
  padding-bottom: 10px;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  align-items: stretch;       /* makes spacer match month height */
}

/* Season spacer: a full-height divider "box" */
.owcal .owcal-spacer{
  flex: 0 0 40px;
  max-width: 40px;
  scroll-snap-align: start;
  border: 4px ridge #333;
  box-shadow: 6px 6px 10px #444;
  background: rgba(255,255,255,0.65);
  position: relative;
}
.owcal .owcal-spacer::after{
  content: "";
  position: absolute;
  inset: 0;
  opacity: 0.25;
  background-image: url("https://blob.gifcities.org/gifcities/BXSEWKELIKS4QP5GD7IBTDUHN22ZPTTI.gif");
  background-repeat: repeat;
  pointer-events: none;
}

/* Each month is one “page” */
.owcal .owcal-monthPage{
  flex: 0 0 92%;
  max-width: 92%;
  scroll-snap-align: start;
  border: 4px ridge #333;
  box-shadow: 6px 6px 10px #444;
  background: rgba(255,255,255,0.88);
}

.owcal .owcal-monthHead{
  background-image: url("https://blob.gifcities.org/gifcities/BXSEWKELIKS4QP5GD7IBTDUHN22ZPTTI.gif");
  background-repeat: repeat;
  border-bottom: 3px double #000;
  padding: 14px 12px;
  display:flex;
  justify-content: center;   /* center horizontally */
  align-items: center;       /* center vertically */
  text-align: center;
}

.owcal .owcal-monthTitle{
  font-weight: bold;
  color: #ffffff;
  font-size: 1.05em;
  letter-spacing: 0.5px;
  font-family: inherit;   /* follow site stylesheet */
}
.owcal .owcal-monthMeta{ font-size: 0.9em; color:#222; }


.owcal .owcal-weekNames{
  display:grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 8px;
  padding: 12px;
  font-size: 0.85em;
}
.owcal .owcal-weekNames div{
  display:flex;
  align-items:center;
  justify-content:center;
  min-height: 46px;
  text-align:center;
  border: 2px outset #999;
  background: #fffbe0;
  padding: 6px 7px;
  font-family: inherit;   /* follow site stylesheet */
}

/* Day grid: 6 columns (weeks) x 5 rows (weekdays)
   This makes weekdays run TOP→BOTTOM, weeks run LEFT→RIGHT */
.owcal .owcal-grid{
  display:grid;
  grid-template-columns: repeat(6, 1fr);
  grid-template-rows: repeat(5, auto);
  gap: 8px;
  padding: 12px;
}

.owcal .owcal-day{ 
  background: #fffefc;
  border: 2px outset #999;
  padding: 6px 7px;
  cursor: pointer;
  min-height: 46px;
}
.owcal .owcal-day:hover{ outline: 2px dashed #900; outline-offset: 1px; }
.owcal .owcal-dayMain{ display:block; font-weight: bold; margin-top: 2px; }

.owcal .owcal-today{ box-shadow: inset 0 0 0 2px #900; }
.owcal .owcal-holiday{ background: #fffae0; border-color: #900; }
.owcal .owcal-selected{ outline: 2px solid #222; outline-offset: 1px; }

@media (max-width: 700px){
  .owcal .owcal-topbar{ flex-direction: column; align-items: stretch; }
  .owcal .owcal-top-right{ justify-content: flex-start; text-align: left; }
  .owcal .owcal-monthPage{ flex-basis: 98%; max-width: 98%; }
  .owcal .owcal-spacer{ flex-basis: 18px; max-width: 18px; }
}
</style>

<script>
/* ==========================
   EDIT THIS CONFIG BLOCK
   ========================== */
const CFG = {
  anchor: { year: 2026, month: 3, day: 20 }, // March 20 => Day 1

  daysPerWeek: 5,
  weeksPerMonth: 6,

  weekdayNames: ["Affday", "Yuleday", "Tolsday", "Thursday", "Sealday"],
  weekNames: ["Inn", "Uon", "Dres", "Virse", "Vess", "Vix"],

  seasons: [
    { name:"Sprimmul", months:[
        { name:"Month I",   zodiac:"Zodiac I" },
        { name:"Month II",  zodiac:"Zodiac II" },
        { name:"Month III", zodiac:"Zodiac III" }
      ],
      betweenDay:{ name:"Between Sprimmul & Summern", blurb:"" }
    },
    { name:"Summern", months:[
        { name:"Month IV", zodiac:"Zodiac IV" },
        { name:"Month V",  zodiac:"Zodiac V" },
        { name:"Month VI", zodiac:"Zodiac VI" }
      ],
      betweenDay:{ name:"Between Summern & Auntaell", blurb:"" }
    },
    { name:"Auntaell", months:[
        { name:"Month VII",  zodiac:"Zodiac VII" },
        { name:"Month VIII", zodiac:"Zodiac VIII" },
        { name:"Month IX",   zodiac:"Zodiac IX" }
      ],
      betweenDay:{ name:"Between Auntaell & Wintern", blurb:"" }
    },
    { name:"Wintern", months:[
        { name:"Month X",  zodiac:"Zodiac X" },
        { name:"Month XI", zodiac:"Zodiac XI" },
        { name:"Month XII",zodiac:"Zodiac XII" }
      ],
      yearEndDays:[
        { name:"Year’s End", blurb:"" },
        { name:"New Year’s Day", blurb:"" }
      ]
    }
  ],

  // Holidays keyed by absolute day number (your Day 1..whatever)
  holidays: {
    // 1: { name:"Holiday Name", blurb:"Short blurb." }
  }
};
/* ==========================
   STOP EDITING HERE
   ========================== */

const DAYS_PER_MONTH = CFG.daysPerWeek * CFG.weeksPerMonth; // 30

function toUTCDate(y,m,d){ return new Date(Date.UTC(y, m-1, d)); }

// Flatten months (12) with season info
function flatMonths(){
  const months = [];
  for (let si=0; si<CFG.seasons.length; si++){
    const s = CFG.seasons[si];
    for (let mi=0; mi<s.months.length; mi++){
      months.push({
        seasonIndex: si,
        season: s.name,
        monthIndexInSeason: mi,
        monthIndexAbs: months.length, // 0..11
        name: s.months[mi].name,
        zodiac: s.months[mi].zodiac
      });
    }
  }
  return months;
}

const MONTHS = flatMonths();

function fictionalTodayAbs(now=new Date()){
  const a = toUTCDate(CFG.anchor.year, CFG.anchor.month, CFG.anchor.day);
  const t = new Date(Date.UTC(now.getFullYear(), now.getMonth(), now.getDate()));
  const diff = Math.floor((t - a) / 86400000);
  // Keep 365 for now because you said you don’t care.
  return ((diff % 365) + 365) % 365 + 1;
}

function buildYear(){
  const out = [];
  let abs = 1;

  for (let si=0; si<CFG.seasons.length; si++){
    const season = CFG.seasons[si];

    for (let mi=0; mi<season.months.length; mi++){
      const month = season.months[mi];

      for (let d=1; d<=DAYS_PER_MONTH; d++){
        const weekIdx = Math.ceil(d / CFG.daysPerWeek); // 1..6
        const weekDayIdx = (d-1) % CFG.daysPerWeek;     // 0..4

        out.push({
          abs,
          type:"day",
          seasonIndex: si,
          season: season.name,
          monthIndexInSeason: mi,
          monthIndexAbs: si*3 + mi,
          month: month.name,
          zodiac: month.zodiac,
          dayInMonth: d,
          week: weekIdx,
          weekName: CFG.weekNames[weekIdx-1] || `Week ${weekIdx}`,
          weekday: CFG.weekdayNames[weekDayIdx] || `Day ${weekDayIdx+1}`,
          holiday: CFG.holidays[abs] || null
        });
        abs++;
      }
    }

    if (season.betweenDay){
      out.push({
        abs,
        type:"between",
        seasonIndex: si,
        season: season.name,
        label: season.betweenDay.name,
        blurb: season.betweenDay.blurb || "",
        holiday: CFG.holidays[abs] || null
      });
      abs++;
    }

    if (season.yearEndDays){
      for (const e of season.yearEndDays){
        out.push({
          abs,
          type:"yearend",
          seasonIndex: si,
          season: season.name,
          label: e.name,
          blurb: e.blurb || "",
          holiday: CFG.holidays[abs] || null
        });
        abs++;
      }
    }
  }

  return out;
}

const YEAR = buildYear();
const TODAY_ABS = fictionalTodayAbs();
let selectedAbs = TODAY_ABS;

function esc(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;");
}

function findByAbs(abs){ return YEAR.find(x => x.abs === abs); }

function setTopBar(obj, labelOverride){
  const title = document.getElementById("owcalTopTitle");
  const line  = document.getElementById("owcalTopLine");
  const sub   = document.getElementById("owcalTopSub");
  const blurb = document.getElementById("owcalTopBlurb");

  title.textContent = labelOverride || "Today";

  if (!obj){
    line.textContent = "…";
    sub.textContent = "";
    blurb.textContent = "";
    return;
  }

  // Main line: where you are in the calendar
  if (obj.type === "day"){
    line.textContent = `${obj.season} · ${obj.month} ( ${obj.zodiac} )`;
    sub.textContent  = `Abs ${obj.abs} · Day ${obj.dayInMonth} · Week ${obj.weekName} · ${obj.weekday}`;

    // Blurb area: holiday info first, otherwise blank (or later you can add day notes)
    if (obj.holiday){
      blurb.textContent = `${obj.holiday.name}${obj.holiday.blurb ? ": " + obj.holiday.blurb : ""}`;
    } else {
      blurb.textContent = "";
    }
  } else {
    line.textContent = `${obj.season} · ${obj.label}`;
    sub.textContent  = `Abs ${obj.abs}`;

    if (obj.holiday){
      blurb.textContent = `${obj.holiday.name}${obj.holiday.blurb ? ": " + obj.holiday.blurb : ""}`;
    } else {
      blurb.textContent = obj.blurb || "";
    }
  }
}

function markSelected(){
  document.querySelectorAll(".owcal [data-abs]").forEach(n => {
    n.classList.toggle("owcal-selected", Number(n.dataset.abs) === selectedAbs);
  });
}

function scrollToAbs(abs){
  const node = document.querySelector(`.owcal [data-abs="${abs}"]`);
  if (node) node.scrollIntoView({ behavior:"smooth", block:"center", inline:"center" });
}

function scrollToMonth(monthIndexAbs){
  const node = document.querySelector(`.owcal [data-month="${monthIndexAbs}"]`);
  if (node) node.scrollIntoView({ behavior:"smooth", block:"nearest", inline:"start" });
}

function render(){
  document.getElementById("anchorTxt").textContent =
    `${CFG.anchor.year}-${String(CFG.anchor.month).padStart(2,"0")}-${String(CFG.anchor.day).padStart(2,"0")}`;

  const root = document.getElementById("calendar");
  root.innerHTML = "";

  // Helper: add a full-height spacer "box"
  const addSpacer = () => {
    const sp = document.createElement("div");
    sp.className = "owcal-spacer";
    root.appendChild(sp);
  };

  // Requested spacers: before Month 1, between 3&4, 6&7, 10&11, and after 12
  addSpacer();

  // Build 12 month pages, each with 30 day tiles
  for (let m=0; m<MONTHS.length; m++){
    const meta = MONTHS[m];

    const page = document.createElement("div");
    page.className = "owcal-monthPage";
    page.setAttribute("data-month", meta.monthIndexAbs);

    const head = document.createElement("div");
    head.className = "owcal-monthHead";
    head.innerHTML = `
      <div class="owcal-monthTitle">${esc(meta.season)} - ${esc(meta.name)} - ${esc(meta.zodiac)}</div>
      <div class="owcal-monthMeta">30 days</div>
    `;
    page.appendChild(head);

    const weekRow = document.createElement("div");
    weekRow.className = "owcal-weekNames";
    for (let w=0; w<CFG.weeksPerMonth; w++){
      const cell = document.createElement("div");
      cell.textContent = CFG.weekNames[w] || `Week ${w+1}`;
      weekRow.appendChild(cell);
    }
    page.appendChild(weekRow);

    const grid = document.createElement("div");
    grid.className = "owcal-grid";

    // Month’s 30 absolute days are contiguous in YEAR for the day objects.
    // Find the first day object for this month index.
    const monthDays = YEAR.filter(x => x.type === "day" && x.monthIndexAbs === m);

    for (const obj of monthDays){
      const tile = document.createElement("div");
      tile.className = "owcal-day";
      tile.setAttribute("data-abs", obj.abs);

      if (obj.abs === TODAY_ABS) tile.classList.add("owcal-today");
      if (obj.holiday) tile.classList.add("owcal-holiday");

      // Place into a 6x5 grid: column = week, row = weekday (top→bottom)
      tile.style.gridColumnStart = obj.week;            // 1..6
      tile.style.gridRowStart = (obj.dayInMonth - 1) % CFG.daysPerWeek + 1; // 1..5

      // Show weekday + day-in-month number, no Abs label
      tile.innerHTML = `
        <span class="owcal-dayMain">${esc(obj.weekday)} (${obj.dayInMonth})</span>
      `;

      tile.addEventListener("click", () => {
        selectedAbs = obj.abs;
        setTopBar(obj, "Selected");
        markSelected();
      });

      grid.appendChild(tile);
    }

    page.appendChild(grid);
    root.appendChild(page);

    // Spacers at specific boundaries (0-based month index):
    // after Month 3 (m=2), after Month 6 (m=5), after Month 9 (m=8)
    if (m === 2 || m === 5 || m === 8) addSpacer();
  }

  // Spacer after Month 12
  addSpacer();

  // Init top bar
  const todayObj = findByAbs(TODAY_ABS);
  setTopBar(todayObj, "Today");
  selectedAbs = TODAY_ABS;
  markSelected();
}

document.getElementById("jumpToday").addEventListener("click", () => {
  const obj = findByAbs(TODAY_ABS);
  selectedAbs = TODAY_ABS;
  setTopBar(obj, "Today");
  markSelected();
  scrollToAbs(TODAY_ABS);
});

document.getElementById("jumpMonth").addEventListener("click", () => {
  const obj = findByAbs(selectedAbs) || findByAbs(TODAY_ABS);
  const m = (obj && obj.type === "day") ? obj.monthIndexAbs : 0;
  scrollToMonth(m);
});

render();
</script>
