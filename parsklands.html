<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Door to the Parsklands</title>

<link rel="stylesheet" href="style.css" />
<link href="https://fonts.googleapis.com/css2?family=Baskervville&display=swap" rel="stylesheet" />

<style>
*{ box-sizing:border-box; }

main{
  min-height:100vh;
  padding:36px 8px 64px;
}

.top-gap{ height:22px; }

.title-float{
  position:sticky;
  top:10px;
  margin:0 auto 16px;
  max-width:min(90vw,760px);
  background:rgba(255,255,255,0.92);
  padding:12px 18px;
  border:4px groove #222;
  box-shadow:4px 4px 8px #555;
  text-align:center;
  z-index:5;
}

.title-float h1{
  margin:0;
  font-size:clamp(18px,2.4vw,26px);
}

/* ================= LAYOUT ================= */

.home-grid{
  max-width:1700px;
  margin:0 auto 18px;        /* centers entire block */
  display:flex;
  justify-content:center;    /* centers columns */
  align-items:flex-start;
  gap:18px;
}

.home-grid > *{ min-width:0; }

.calendar-wrap{
  flex:0 0 clamp(420px,38vw,560px);
  background:rgba(255,255,255,0.92);
  padding:12px 18px;
  border:4px groove #222;
  box-shadow:4px 4px 8px #555;
  overflow:visible;
}

/* Calendar safety without breaking it */
#calendarMount{
  width:100%;
  overflow-x:auto;
  overflow-y:visible;
}

#calendarMount table{
  width:100% !important;
  table-layout:fixed !important;
  border-collapse:collapse;
}

#calendarMount th,
#calendarMount td{
  min-width:0 !important;
  overflow:hidden;
  text-overflow:ellipsis;
  padding:6px 4px;
}

/* ================= BOOK ================= */

.book-shell{
  flex:1 1 0;
  min-width:520px;
  display:flex;
}

.book-scale-wrap{
  width:100%;
  overflow:hidden;
  display:flex;
  justify-content:center;  /* centers scaled book */
}

.spread{
  background:#fff;
  border:4px groove #222;
  box-shadow:4px 4px 8px #555;
  width:100%;
  font-family:'Baskervville',serif;
  transform-origin:top center; /* key change */
  will-change:transform;
}

.spread-inner{
  display:grid;
  grid-template-columns:minmax(0,1fr) minmax(0,1fr);
}

.book-page{
  padding:clamp(18px,2.6vw,34px);
  min-width:0;
}

.book-page.left{
  border-right:1px solid rgba(0,0,0,0.18);
  box-shadow:inset -18px 0 24px rgba(0,0,0,0.08);
}

.book-page.right{
  box-shadow:inset 18px 0 24px rgba(0,0,0,0.08);
}

.left-quote{
  font-size:clamp(18px,2.2vw,26px);
  line-height:1.45;
}

.left-quote .line{ margin:0; }
.left-quote .line.indent{ margin-left:52px; }

.left-quote .sig{
  margin-top:28px;
  display:flex;
  justify-content:flex-end;
  gap:18px;
}

.toc .section-title{
  font-weight:800;
  font-size:clamp(20px,2.2vw,28px);
  margin:0 0 18px;
  text-decoration:underline;
}

.toc .list{
  list-style:none;
  padding:0;
  margin:0 0 50px;
  font-size:clamp(22px,2.4vw,32px);
  text-align:center;
}

.toc .list li{ margin:4px 0; }

.toc a{
  color:#000;
  text-decoration:none;
}

.toc a:hover{ text-decoration:underline; }

/* ================= MOBILE ================= */

@media (max-width:900px){
  .home-grid{
    flex-direction:column;
    align-items:stretch;
  }
  .spread{
    transform:none !important;
    width:100% !important;
  }
}

@media (max-width:800px){
  .spread-inner{ grid-template-columns:1fr; }
  .book-page.left{
    border-right:none;
    border-bottom:1px solid rgba(0,0,0,0.18);
  }
}
</style>
</head>

<body>

<div id="header"></div>

<main>

<div class="top-gap"></div>

<div class="title-float">
<h1>UNDER CONSTRUCTION</h1>
</div>

<div class="home-grid">

<div class="calendar-wrap">
<div id="calendarMount">Loading calendarâ€¦</div>
</div>

<div class="book-shell">
<div class="book-scale-wrap">
<div class="spread" id="bookSpread">
<div class="spread-inner">

<section class="book-page left">
<div class="left-quote">
<p class="line">The Parsklands are a home of mine. Ever blooming.</p>
<p class="line indent">And so, my discoveries are continuous.</p>
<p class="line">As time is granted, entries will be updated.</p>
<div class="sig">
<span>-</span>
<span>Wrensul</span>
</div>
</div>
</section>

<section class="book-page right toc">
<div class="section-title">Field Guides -</div>
<ul class="list">
<li><a href="atlas.html">Atlas</a></li>
<li><a href="magic.html">Magic</a></li>
<li><a href="creatures.html">Creatures</a></li>
<li><a href="gods.html">Gods</a></li>
<li><a href="timeline.html">Timeline</a></li>
<li><a href="glossary.html">Glossary</a></li>
</ul>

<div class="section-title">Story Telling -</div>
<ul class="list">
<li><a href="words-of-parsk.html">Words of Parsk</a></li>
<li><a href="fables.html">Fables</a></li>
<li><a href="small-memories.html">Small Memories</a></li>
<li><a href="old-friends.html">Old Friends</a></li>
</ul>
</section>

</div>
</div>
</div>
</div>

</div>

</main>

<div id="footer"></div>

<script>
fetch("header.html")
.then(r=>r.text())
.then(html=>{document.getElementById("header").innerHTML=html;});

fetch("footer.html")
.then(r=>r.text())
.then(html=>{document.getElementById("footer").innerHTML=html;});

/* SCALE BOOK TO CALENDAR HEIGHT */

function syncBook(){
  if(window.matchMedia("(max-width:900px)").matches){
    bookSpread.style.transform="none";
    bookSpread.style.width="100%";
    return;
  }

  const cal=document.querySelector(".calendar-wrap");
  const book=document.getElementById("bookSpread");

  book.style.transform="none";
  book.style.width="100%";

  const calH=cal.getBoundingClientRect().height;
  const bookH=book.getBoundingClientRect().height;

  if(!calH||!bookH) return;

  const scale=(bookH>calH)?(calH/bookH):1;

  book.style.transform=`scale(${scale})`;
  book.style.width=`${100/scale}%`;
}

fetch("calendar.html")
.then(r=>r.text())
.then(html=>{
  document.getElementById("calendarMount").innerHTML=html;

  const scripts=document.getElementById("calendarMount").querySelectorAll("script");
  scripts.forEach(old=>{
    const s=document.createElement("script");
    [...old.attributes].forEach(a=>s.setAttribute(a.name,a.value));
    s.textContent=old.textContent;
    old.replaceWith(s);
  });

  requestAnimationFrame(()=>requestAnimationFrame(syncBook));
});

let resizeTimer;
window.addEventListener("resize",()=>{
  clearTimeout(resizeTimer);
  resizeTimer=setTimeout(syncBook,120);
});
</script>

</body>
</html>